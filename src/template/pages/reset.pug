doctype html
html(lang="en")
    head
        meta(charset="utf-8")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible" content="ie=edge")
        block title
            link(href="../main.css" rel="stylesheet")
            title= htmlWebpackPlugin.options.title
    body        
        div(class="container" id="container")
            div(class="view-container")
                div(class="view")
                    div(class="image")
            div(class="form-container sign-up-container")
                form(name="resetForm")
                    h1 Reset password
                    span Please enter your new password                            
                    input(type="password" name="userPassword" placeholder="Password...")
                    input(input type="password" name="userConfirmPassword" placeholder="Confirm password...")
                    input(type="submit" class="btn" name="reset" value="Sign up")
        script.
            let apiBase = 'http://localhost:3000/api'
            const btnResetPassword = document.querySelector('input[name="reset"]')
            btnResetPassword.addEventListener('click', (event) => {
                event.preventDefault()
                let resetForm = document.forms['resetForm']
                let userPassword = resetForm.elements['userPassword'].value
                let userConfirmPassword = resetForm.elements['userConfirmPassword'].value
                resetPassword(userPassword, userConfirmPassword)
                    .then(response => response.json())
                    .then(result => console.log(result))
                    .catch(error => console.log(error))
                resetForm.elements['userPassword'].value = ''
                resetForm.elements['userConfirmPassword'].value = ''
            })
            async function resetPassword(userPassword, userConfirmPassword) {
                const resetPassword = await fetch(`${apiBase}/users/reset_password`, {
                    method: 'POST',
                    body: JSON.stringify({
                        password: userPassword,
                        confirmationPassword: userConfirmPassword,
                        email: 'someemail@gmail.com'
                    }),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                return resetPassword
            }